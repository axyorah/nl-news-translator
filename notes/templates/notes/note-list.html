{% extends 'main.html' %} 
{% load static %} 

{% block content %}

<main class="container">
  <section class="row">
    <div class="col boxed">
        TBA: clickable tags with the number of notes (radio or checkboxes);
        <ul>
          <li>colorcode the same as on the figures above?</li>
          <li>
            on click: show all (paginated) notes from selected tag in a "table"
          </li>
        </ul>

        <form action="#" method="POST">
            {% csrf_token %}
            <ul class="row">
                {% for tag in request.user.profile.tag_set.all %}
                <li class="col capsule">
                    <label for="{{ tag.name }}">
                        <input type="checkbox" id="id_{{ tag.name }}" name="{{ tag.name }}"/>
                        {{ tag.name }}
                    </label>
                </li>
                {% endfor %}
            </ul>
            <button type="submit" class="btn btn-outline-secondary">Filter</button>
        </form>
    </div>
  </section>
  
  <section class="row">
    <div class="col boxed">
    TBA: table of notes from a selected tag(s?): (created, tags, side a, side b)
    <ul>
      <li>sortable by `created`</li>
      <li>side b can be hidden</li>
    </ul>

    {% if notes %}

    <p>{{ request.user.profile.username }}'s notes:</p>

    <table class="table container w-100">
        <thead>
        <tr>
            <th scope="col"></th>
            <th scope="col">Date</th>
            <th scope="col">Side A</th>
            <th scope="col" class="d-flex">
                <span>Side B</span>
                <span class="form-check-inline form-switch d-flex">
                    <input class="form-check-input expandable-global m-0" type="checkbox" role="switch" id="flexSwitchCheckChecked" checked>
                    <label class="form-check-label" for="flexSwitchCheckChecked"></label>
                </span>
            </th>
            <th scope="col">Tags</th>
        </tr>
        </thead>

        <tbody> 
        {% for note in notes %}        
        <tr>
            <th scope="row"><a href="{% url 'note' note.id %}">&#10551;</a></th>
            <td>{{ note.created }}</td>
            <td class="expandable">
                <div class="preview">{{ note.side_a|slice:"0:25" }}</div>
                <div class="hidden"><pre><code>{{ note.side_a }}</code></pre></div>
            </td>
            <td class="expandable hiddle-global">
                <div class="preview">{{ note.side_b|slice:"0:25" }}</div>
                <div class="hidden"><pre><code>{{ note.side_b }}</code></pre></div>
            </td>
            <td>
                <div class="row">
                    {% for tag in note.tags.all %}
                    <span class="col capsule">{{ tag }}</span>
                    {% endfor %}
                </div>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}
  
    </div>
  </section>

  <section class="row justify-content-center">
      {% if notes.paginator %}

      {% if notes.has_previous %}
      <a class="col capsule-a" href="{% url 'note-list' %}?page={{ notes.previous_page_number }}">
        prev
      </a>
      {% endif %}

      {% for page in notes.paginator.page_range %}
          
          {% if page == notes.number %}
          <a class="col capsule-a bg-dark" href="{% url 'note-list' %}?page={{ page }}">
            {{ page }}
          </a>
          {% else %}
          <a class="col capsule-a" href="{% url 'note-list' %}?page={{ page }}">
            {{ page }}
          </a>
          {% endif %}

      {% endfor %}

      {% if notes.has_next %}
      <a class="col capsule-a" href="{% url 'note-list' %}?page={{ notes.next_page_number }}">
        next
      </a>
      {% endif %}

      {% endif %}
  </section>

</main>

{% endblock content %}
